step "send-an-email" {
    name = "Send an \"\"Success\" Email"

    action {
        action_type = "Octopus.Email"
        is_disabled = true
        properties = {
            Octopus.Action.Email.Body = <<-EOT
                <!doctype html>
                <html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">
                
                <head>
                    <style class="darkreader darkreader--fallback" media="screen"></style>
                    <style class="darkreader darkreader--text" media="screen"></style>
                    <style class="darkreader darkreader--invert" media="screen">
                        .jfk-bubble.gtx-bubble,
                        .captcheck_answer_label>input+img,
                        span#closed_text>img[src^="https://www.gstatic.com/images/branding/googlelogo"],
                        span[data-href^="https://www.hcaptcha.com/"]>#icon,
                        #bit-notification-bar-iframe,
                        ::-webkit-calendar-picker-indicator,
                        div[role="dialog"] div[role="document"],
                        div[role="dialog"] div[role="document"],
                        div[role="dialog"] div[role="document"] {
                            filter: invert(100%) hue-rotate(180deg) contrast(90%) !important;
                        }
                    </style>
                    <style class="darkreader darkreader--inline" media="screen">
                        [data-darkreader-inline-bgcolor] {
                            background-color: var(--darkreader-inline-bgcolor) !important;
                        }
                
                        [data-darkreader-inline-bgimage] {
                            background-image: var(--darkreader-inline-bgimage) !important;
                        }
                
                        [data-darkreader-inline-border] {
                            border-color: var(--darkreader-inline-border) !important;
                        }
                
                        [data-darkreader-inline-border-bottom] {
                            border-bottom-color: var(--darkreader-inline-border-bottom) !important;
                        }
                
                        [data-darkreader-inline-border-left] {
                            border-left-color: var(--darkreader-inline-border-left) !important;
                        }
                
                        [data-darkreader-inline-border-right] {
                            border-right-color: var(--darkreader-inline-border-right) !important;
                        }
                
                        [data-darkreader-inline-border-top] {
                            border-top-color: var(--darkreader-inline-border-top) !important;
                        }
                
                        [data-darkreader-inline-boxshadow] {
                            box-shadow: var(--darkreader-inline-boxshadow) !important;
                        }
                
                        [data-darkreader-inline-color] {
                            color: var(--darkreader-inline-color) !important;
                        }
                
                        [data-darkreader-inline-fill] {
                            fill: var(--darkreader-inline-fill) !important;
                        }
                
                        [data-darkreader-inline-stroke] {
                            stroke: var(--darkreader-inline-stroke) !important;
                        }
                
                        [data-darkreader-inline-outline] {
                            outline-color: var(--darkreader-inline-outline) !important;
                        }
                
                        [data-darkreader-inline-stopcolor] {
                            stop-color: var(--darkreader-inline-stopcolor) !important;
                        }
                    </style>
                    <style class="darkreader darkreader--variables" media="screen">
                        :root {
                            --darkreader-neutral-background: #131516;
                            --darkreader-neutral-text: #d8d4cf;
                            --darkreader-selection-background: #004daa;
                            --darkreader-selection-text: #e8e6e3;
                        }
                    </style>
                    <style class="darkreader darkreader--user-agent" media="screen">
                        html {
                            color-scheme: dark !important;
                        }
                
                        input,
                        textarea,
                        select,
                        button,
                        dialog {
                            background-color: #181a1b;
                        }
                
                        html,
                        body,
                        input,
                        textarea,
                        select,
                        button {
                            border-color: #736b5e;
                            color: #e8e6e3;
                        }
                
                        a {
                            color: #3391ff;
                        }
                
                        table {
                            border-color: #545b5e;
                        }
                
                        ::placeholder {
                            color: #b2aba1;
                        }
                
                        input:-webkit-autofill,
                        textarea:-webkit-autofill,
                        select:-webkit-autofill {
                            background-color: #404400 !important;
                            color: #e8e6e3 !important;
                        }
                
                        ::-webkit-scrollbar {
                            background-color: #202324;
                            color: #aba499;
                        }
                
                        ::-webkit-scrollbar-thumb {
                            background-color: #454a4d;
                        }
                
                        ::-webkit-scrollbar-thumb:hover {
                            background-color: #575e62;
                        }
                
                        ::-webkit-scrollbar-thumb:active {
                            background-color: #484e51;
                        }
                
                        ::-webkit-scrollbar-corner {
                            background-color: #181a1b;
                        }
                
                        ::selection {
                            background-color: #004daa !important;
                            color: #e8e6e3 !important;
                        }
                
                        ::-moz-selection {
                            background-color: #004daa !important;
                            color: #e8e6e3 !important;
                        }
                    </style>
                    <style class="darkreader darkreader--fallback" media="screen"></style>
                    <style class="darkreader darkreader--text" media="screen"></style>
                    <style class="darkreader darkreader--invert" media="screen">
                        .jfk-bubble.gtx-bubble,
                        .captcheck_answer_label>input+img,
                        span#closed_text>img[src^="https://www.gstatic.com/images/branding/googlelogo"],
                        span[data-href^="https://www.hcaptcha.com/"]>#icon,
                        #bit-notification-bar-iframe,
                        ::-webkit-calendar-picker-indicator,
                        div[role="dialog"] div[role="document"],
                        div[role="dialog"] div[role="document"],
                        div[role="dialog"] div[role="document"] {
                            filter: invert(100%) hue-rotate(180deg) contrast(90%) !important;
                        }
                    </style>
                    <style class="darkreader darkreader--inline" media="screen">
                        [data-darkreader-inline-bgcolor] {
                            background-color: var(--darkreader-inline-bgcolor) !important;
                        }
                
                        [data-darkreader-inline-bgimage] {
                            background-image: var(--darkreader-inline-bgimage) !important;
                        }
                
                        [data-darkreader-inline-border] {
                            border-color: var(--darkreader-inline-border) !important;
                        }
                
                        [data-darkreader-inline-border-bottom] {
                            border-bottom-color: var(--darkreader-inline-border-bottom) !important;
                        }
                
                        [data-darkreader-inline-border-left] {
                            border-left-color: var(--darkreader-inline-border-left) !important;
                        }
                
                        [data-darkreader-inline-border-right] {
                            border-right-color: var(--darkreader-inline-border-right) !important;
                        }
                
                        [data-darkreader-inline-border-top] {
                            border-top-color: var(--darkreader-inline-border-top) !important;
                        }
                
                        [data-darkreader-inline-boxshadow] {
                            box-shadow: var(--darkreader-inline-boxshadow) !important;
                        }
                
                        [data-darkreader-inline-color] {
                            color: var(--darkreader-inline-color) !important;
                        }
                
                        [data-darkreader-inline-fill] {
                            fill: var(--darkreader-inline-fill) !important;
                        }
                
                        [data-darkreader-inline-stroke] {
                            stroke: var(--darkreader-inline-stroke) !important;
                        }
                
                        [data-darkreader-inline-outline] {
                            outline-color: var(--darkreader-inline-outline) !important;
                        }
                
                        [data-darkreader-inline-stopcolor] {
                            stop-color: var(--darkreader-inline-stopcolor) !important;
                        }
                    </style>
                    <style class="darkreader darkreader--variables" media="screen">
                        :root {
                            --darkreader-neutral-background: #131516;
                            --darkreader-neutral-text: #d8d4cf;
                            --darkreader-selection-background: #004daa;
                            --darkreader-selection-text: #e8e6e3;
                        }
                    </style>
                    <style class="darkreader darkreader--user-agent" media="screen">
                        html {
                            color-scheme: dark !important;
                        }
                
                        input,
                        textarea,
                        select,
                        button,
                        dialog {
                            background-color: #181a1b;
                        }
                
                        html,
                        body,
                        input,
                        textarea,
                        select,
                        button {
                            border-color: #736b5e;
                            color: #e8e6e3;
                        }
                
                        a {
                            color: #3391ff;
                        }
                
                        table {
                            border-color: #545b5e;
                        }
                
                        ::placeholder {
                            color: #b2aba1;
                        }
                
                        input:-webkit-autofill,
                        textarea:-webkit-autofill,
                        select:-webkit-autofill {
                            background-color: #404400 !important;
                            color: #e8e6e3 !important;
                        }
                
                        ::-webkit-scrollbar {
                            background-color: #202324;
                            color: #aba499;
                        }
                
                        ::-webkit-scrollbar-thumb {
                            background-color: #454a4d;
                        }
                
                        ::-webkit-scrollbar-thumb:hover {
                            background-color: #575e62;
                        }
                
                        ::-webkit-scrollbar-thumb:active {
                            background-color: #484e51;
                        }
                
                        ::-webkit-scrollbar-corner {
                            background-color: #181a1b;
                        }
                
                        ::selection {
                            background-color: #004daa !important;
                            color: #e8e6e3 !important;
                        }
                
                        ::-moz-selection {
                            background-color: #004daa !important;
                            color: #e8e6e3 !important;
                        }
                    </style>
                    <style class="darkreader darkreader--fallback" media="screen"></style>
                    <style class="darkreader darkreader--text" media="screen"></style>
                    <style class="darkreader darkreader--invert" media="screen">
                        .jfk-bubble.gtx-bubble,
                        .captcheck_answer_label>input+img,
                        span#closed_text>img[src^="https://www.gstatic.com/images/branding/googlelogo"],
                        span[data-href^="https://www.hcaptcha.com/"]>#icon,
                        #bit-notification-bar-iframe,
                        ::-webkit-calendar-picker-indicator,
                        div[role="dialog"] div[role="document"],
                        div[role="dialog"] div[role="document"],
                        div[role="dialog"] div[role="document"] {
                            filter: invert(100%) hue-rotate(180deg) contrast(90%) !important;
                        }
                    </style>
                    <style class="darkreader darkreader--inline" media="screen">
                        [data-darkreader-inline-bgcolor] {
                            background-color: var(--darkreader-inline-bgcolor) !important;
                        }
                
                        [data-darkreader-inline-bgimage] {
                            background-image: var(--darkreader-inline-bgimage) !important;
                        }
                
                        [data-darkreader-inline-border] {
                            border-color: var(--darkreader-inline-border) !important;
                        }
                
                        [data-darkreader-inline-border-bottom] {
                            border-bottom-color: var(--darkreader-inline-border-bottom) !important;
                        }
                
                        [data-darkreader-inline-border-left] {
                            border-left-color: var(--darkreader-inline-border-left) !important;
                        }
                
                        [data-darkreader-inline-border-right] {
                            border-right-color: var(--darkreader-inline-border-right) !important;
                        }
                
                        [data-darkreader-inline-border-top] {
                            border-top-color: var(--darkreader-inline-border-top) !important;
                        }
                
                        [data-darkreader-inline-boxshadow] {
                            box-shadow: var(--darkreader-inline-boxshadow) !important;
                        }
                
                        [data-darkreader-inline-color] {
                            color: var(--darkreader-inline-color) !important;
                        }
                
                        [data-darkreader-inline-fill] {
                            fill: var(--darkreader-inline-fill) !important;
                        }
                
                        [data-darkreader-inline-stroke] {
                            stroke: var(--darkreader-inline-stroke) !important;
                        }
                
                        [data-darkreader-inline-outline] {
                            outline-color: var(--darkreader-inline-outline) !important;
                        }
                
                        [data-darkreader-inline-stopcolor] {
                            stop-color: var(--darkreader-inline-stopcolor) !important;
                        }
                    </style>
                    <style class="darkreader darkreader--variables" media="screen">
                        :root {
                            --darkreader-neutral-background: #131516;
                            --darkreader-neutral-text: #d8d4cf;
                            --darkreader-selection-background: #004daa;
                            --darkreader-selection-text: #e8e6e3;
                        }
                    </style>
                    <style class="darkreader darkreader--user-agent" media="screen">
                        html {
                            color-scheme: dark !important;
                        }
                
                        input,
                        textarea,
                        select,
                        button,
                        dialog {
                            background-color: #181a1b;
                        }
                
                        html,
                        body,
                        input,
                        textarea,
                        select,
                        button {
                            border-color: #736b5e;
                            color: #e8e6e3;
                        }
                
                        a {
                            color: #3391ff;
                        }
                
                        table {
                            border-color: #545b5e;
                        }
                
                        ::placeholder {
                            color: #b2aba1;
                        }
                
                        input:-webkit-autofill,
                        textarea:-webkit-autofill,
                        select:-webkit-autofill {
                            background-color: #404400 !important;
                            color: #e8e6e3 !important;
                        }
                
                        ::-webkit-scrollbar {
                            background-color: #202324;
                            color: #aba499;
                        }
                
                        ::-webkit-scrollbar-thumb {
                            background-color: #454a4d;
                        }
                
                        ::-webkit-scrollbar-thumb:hover {
                            background-color: #575e62;
                        }
                
                        ::-webkit-scrollbar-thumb:active {
                            background-color: #484e51;
                        }
                
                        ::-webkit-scrollbar-corner {
                            background-color: #181a1b;
                        }
                
                        ::selection {
                            background-color: #004daa !important;
                            color: #e8e6e3 !important;
                        }
                
                        ::-moz-selection {
                            background-color: #004daa !important;
                            color: #e8e6e3 !important;
                        }
                    </style>
                    <style class="darkreader darkreader--fallback" media="screen"></style>
                    <style class="darkreader darkreader--text" media="screen"></style>
                    <style class="darkreader darkreader--invert" media="screen">
                        .jfk-bubble.gtx-bubble,
                        .captcheck_answer_label>input+img,
                        span#closed_text>img[src^="https://www.gstatic.com/images/branding/googlelogo"],
                        span[data-href^="https://www.hcaptcha.com/"]>#icon,
                        #bit-notification-bar-iframe,
                        ::-webkit-calendar-picker-indicator,
                        div[role="dialog"] div[role="document"],
                        div[role="dialog"] div[role="document"],
                        div[role="dialog"] div[role="document"] {
                            filter: invert(100%) hue-rotate(180deg) contrast(90%) !important;
                        }
                    </style>
                    <style class="darkreader darkreader--inline" media="screen">
                        [data-darkreader-inline-bgcolor] {
                            background-color: var(--darkreader-inline-bgcolor) !important;
                        }
                
                        [data-darkreader-inline-bgimage] {
                            background-image: var(--darkreader-inline-bgimage) !important;
                        }
                
                        [data-darkreader-inline-border] {
                            border-color: var(--darkreader-inline-border) !important;
                        }
                
                        [data-darkreader-inline-border-bottom] {
                            border-bottom-color: var(--darkreader-inline-border-bottom) !important;
                        }
                
                        [data-darkreader-inline-border-left] {
                            border-left-color: var(--darkreader-inline-border-left) !important;
                        }
                
                        [data-darkreader-inline-border-right] {
                            border-right-color: var(--darkreader-inline-border-right) !important;
                        }
                
                        [data-darkreader-inline-border-top] {
                            border-top-color: var(--darkreader-inline-border-top) !important;
                        }
                
                        [data-darkreader-inline-boxshadow] {
                            box-shadow: var(--darkreader-inline-boxshadow) !important;
                        }
                
                        [data-darkreader-inline-color] {
                            color: var(--darkreader-inline-color) !important;
                        }
                
                        [data-darkreader-inline-fill] {
                            fill: var(--darkreader-inline-fill) !important;
                        }
                
                        [data-darkreader-inline-stroke] {
                            stroke: var(--darkreader-inline-stroke) !important;
                        }
                
                        [data-darkreader-inline-outline] {
                            outline-color: var(--darkreader-inline-outline) !important;
                        }
                
                        [data-darkreader-inline-stopcolor] {
                            stop-color: var(--darkreader-inline-stopcolor) !important;
                        }
                    </style>
                    <style class="darkreader darkreader--variables" media="screen">
                        :root {
                            --darkreader-neutral-background: #131516;
                            --darkreader-neutral-text: #d8d4cf;
                            --darkreader-selection-background: #004daa;
                            --darkreader-selection-text: #e8e6e3;
                        }
                    </style>
                    <style class="darkreader darkreader--user-agent" media="screen">
                        html {
                            color-scheme: dark !important;
                        }
                
                        input,
                        textarea,
                        select,
                        button,
                        dialog {
                            background-color: #181a1b;
                        }
                
                        html,
                        body,
                        input,
                        textarea,
                        select,
                        button {
                            border-color: #736b5e;
                            color: #e8e6e3;
                        }
                
                        a {
                            color: #3391ff;
                        }
                
                        table {
                            border-color: #545b5e;
                        }
                
                        ::placeholder {
                            color: #b2aba1;
                        }
                
                        input:-webkit-autofill,
                        textarea:-webkit-autofill,
                        select:-webkit-autofill {
                            background-color: #404400 !important;
                            color: #e8e6e3 !important;
                        }
                
                        ::-webkit-scrollbar {
                            background-color: #202324;
                            color: #aba499;
                        }
                
                        ::-webkit-scrollbar-thumb {
                            background-color: #454a4d;
                        }
                
                        ::-webkit-scrollbar-thumb:hover {
                            background-color: #575e62;
                        }
                
                        ::-webkit-scrollbar-thumb:active {
                            background-color: #484e51;
                        }
                
                        ::-webkit-scrollbar-corner {
                            background-color: #181a1b;
                        }
                
                        ::selection {
                            background-color: #004daa !important;
                            color: #e8e6e3 !important;
                        }
                
                        ::-moz-selection {
                            background-color: #004daa !important;
                            color: #e8e6e3 !important;
                        }
                    </style>
                    <title></title>
                    <!--[if !mso]><!-->
                    <meta http-equiv="X-UA-Compatible" content="IE=edge">
                    <!--<![endif]-->
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1">
                    <style type="text/css">
                        #outlook a {
                            padding: 0;
                        }
                
                        body {
                            margin: 0;
                            padding: 0;
                            -webkit-text-size-adjust: 100%;
                            -ms-text-size-adjust: 100%;
                        }
                
                        table,
                        td {
                            border-collapse: collapse;
                            mso-table-lspace: 0pt;
                            mso-table-rspace: 0pt;
                        }
                
                        img {
                            border: 0;
                            height: auto;
                            line-height: 100%;
                            outline: none;
                            text-decoration: none;
                            -ms-interpolation-mode: bicubic;
                        }
                
                        p {
                            display: block;
                            margin: 13px 0;
                        }
                    </style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <!--[if mso]>
                        <xml>
                        <o:OfficeDocumentSettings>
                          <o:AllowPNG></o:AllowPNG>
                          <o:PixelsPerInch>96</o:PixelsPerInch>
                        </o:OfficeDocumentSettings>
                        </xml>
                        <![endif]-->
                    <!--[if lte mso 11]>
                        <style type="text/css">
                          .mj-outlook-group-fix { width:100% !important; }
                        </style>
                        <![endif]-->
                    <!--[if !mso]><!-->
                    <link href="product-summary_files/css.css" rel="stylesheet" type="text/css">
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style type="text/css">
                        @import url(https://fonts.googleapis.com/css?family=Noto+Sans:normal,italic,bold&display=swap);
                    </style>
                    <!--<![endif]-->
                    <style type="text/css">
                        @media only screen and (min-width:480px) {
                            .mj-column-per-100 {
                                width: 100% !important;
                                max-width: 100%;
                            }
                
                            .mj-column-per-50 {
                                width: 50% !important;
                                max-width: 50%;
                            }
                
                            .mj-column-per-33-333333333333336 {
                                width: 33.333333333333336% !important;
                                max-width: 33.333333333333336%;
                            }
                
                            .mj-column-per-40 {
                                width: 40% !important;
                                max-width: 40%;
                            }
                
                            .mj-column-per-60 {
                                width: 60% !important;
                                max-width: 60%;
                            }
                        }
                    </style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style media="screen and (min-width:480px)">
                        .moz-text-html .mj-column-per-100 {
                            width: 100% !important;
                            max-width: 100%;
                        }
                
                        .moz-text-html .mj-column-per-50 {
                            width: 50% !important;
                            max-width: 50%;
                        }
                
                        .moz-text-html .mj-column-per-33-333333333333336 {
                            width: 33.333333333333336% !important;
                            max-width: 33.333333333333336%;
                        }
                
                        .moz-text-html .mj-column-per-40 {
                            width: 40% !important;
                            max-width: 40%;
                        }
                
                        .moz-text-html .mj-column-per-60 {
                            width: 60% !important;
                            max-width: 60%;
                        }
                    </style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style type="text/css">
                        @media only screen and (max-width:480px) {
                            table.mj-full-width-mobile {
                                width: 100% !important;
                            }
                
                            td.mj-full-width-mobile {
                                width: auto !important;
                            }
                        }
                    </style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style type="text/css">
                        .vdt_styles {}
                    </style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                    <style class="darkreader darkreader--sync" media="screen"></style>
                </head>
                
                <body style="word-spacing: normal; background-color: #ebebeb; --darkreader-inline-bgcolor:#232628;" data-darkreader-inline-bgcolor data-new-gr-c-s-loaded="14.1093.0">
                    <div style="background-color: #ebebeb; --darkreader-inline-bgcolor:#232628;" data-darkreader-inline-bgcolor>
                        <!--[if mso | IE]><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #ffffff; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #ffffff; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:40px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="width:520px;" ><![endif]-->
                                            <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0;line-height:0;text-align:left;display:inline-block;width:100%;direction:ltr;">
                                                <!--[if mso | IE]><table border="0" cellpadding="0" cellspacing="0" role="presentation" ><tr><td style="vertical-align:top;width:260px;" ><![endif]-->
                                                <div class="mj-column-per-50 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:50%;">
                                                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                        <tbody>
                                                            <tr>
                                                                <td style="vertical-align:top;padding:0;">
                                                                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td style="font-size:0px;padding:0px;padding-top:0px;padding-right:0px;padding-bottom:0px;padding-left:0px;word-break:break-word;" align="left">
                                                                                    <table role="presentation" style="border-collapse:collapse;border-spacing:0px;" cellspacing="0" cellpadding="0" border="0">
                                                                                        <tbody>
                                                                                            <tr>
                                                                                                <td style="width:123px;"><a><img src="https://yzfnxb.stripocdn.email/content/guids/CABINET_aca1d3e6318c5e4146c2124dece63323a2f4f6e7fa2c95abab6ff219bec46847/images/ametekstc_oXg.jpeg" style="border: 0px; display: block; outline: none; text-decoration: none; height: auto; width: 100%; font-size: 13px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial; --darkreader-inline-outline: initial;" width="123" height="auto" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-outline alt></a></td>
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <!--[if mso | IE]></td><td style="vertical-align:top;width:260px;" ><![endif]-->
                                                <div class="mj-column-per-50 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:50%;">
                                                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                        <tbody>
                                                            <tr>
                                                                <td style="vertical-align:top;padding:0;">
                                                                    <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                        <tbody>
                                                                            <tr>
                                                                                <td style="font-size:0px;padding:10px;word-break:break-word;" align="right">
                                                                                    <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 16px; line-height: 1.25; text-align: right; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" class="esd-text" data-darkreader-inline-color>#{Octopus.Action[Deployment Script].Output.date}</div>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <!--[if mso | IE]></td></tr></table><![endif]-->
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #d90429; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#ae0321;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #d90429; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#ae0321;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:30px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:540px;" ><![endif]-->
                                            <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="left">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 24px; line-height: 1.5; text-align: left; color: #ffffff; --darkreader-inline-color:#e8e6e3;" class="esd-text" data-darkreader-inline-color><strong>Deployment #{Octopus.Action[Update Amazon ECS Service].Status.Code}&nbsp;</strong><br><br>#{Octopus.Space.Name}/#{Octopus.ProjectGroup.Name}/#{Octopus.Project.Name}.</div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #ffffff; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #ffffff; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:30px;padding-bottom:20px;padding-left:30px;padding-right:30px;padding-top:30px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:180px;" ><![endif]-->
                                            <div class="mj-column-per-33-333333333333336 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 1; text-align: center; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" data-darkreader-inline-color><strong>PROJECT NAME</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:5px;padding-right:10px;padding-bottom:10px;padding-left:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 16px; line-height: 1.5; text-align: center; color: #000000; --darkreader-inline-color:#e8e6e3;" class="esd-text" data-darkreader-inline-color>#{Octopus.Project.Name}</div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td><td class="" style="vertical-align:top;width:180px;" ><![endif]-->
                                            <div class="mj-column-per-33-333333333333336 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 1; text-align: center; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" data-darkreader-inline-color><strong>PROJECT VERSION</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:5px;padding-right:10px;padding-bottom:5px;padding-left:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 24px; line-height: 1; text-align: center; color: #d90429; --darkreader-inline-color:#fb3557;" data-darkreader-inline-color><strong>#{Octopus.Release.Number}</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td><td class="" style="vertical-align:top;width:180px;" ><![endif]-->
                                            <div class="mj-column-per-33-333333333333336 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 1; text-align: center; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" data-darkreader-inline-color><strong>PROJECT ENVIRONMENT</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:5px;padding-right:10px;padding-bottom:10px;padding-left:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 16px; line-height: 1.5; text-align: center; color: #000000; --darkreader-inline-color:#e8e6e3;" class="esd-text" data-darkreader-inline-color>#{Octopus.Environment.Name}</div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #ffffff; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #ffffff; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:20px;padding-bottom:0px;padding-left:40px;padding-right:40px;padding-top:0px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:520px;" ><![endif]-->
                                            <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px 0;padding-top:10px;padding-right:0;padding-bottom:10px;padding-left:0;word-break:break-word;" align="center" class="esd-text">
                                                                                <p style="border-top: 2px solid #d3d3d3; font-size: 1px; margin: 0px auto; width: 100%; --darkreader-inline-border-top:#3c4144;" data-darkreader-inline-border-top></p>
                                                                                <!--[if mso | IE]><table align="center" border="0" cellpadding="0" cellspacing="0" style="border-top:solid 2px #d3d3d3;font-size:1px;margin:0px auto;width:520px;" role="presentation" width="520px" ><tr><td style="height:0;line-height:0;"> &nbsp;
                </td></tr></table><![endif]-->
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #ffffff; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #ffffff; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:30px;padding-bottom:20px;padding-left:30px;padding-right:30px;padding-top:20px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:180px;" ><![endif]-->
                                            <div class="mj-column-per-33-333333333333336 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 1; text-align: center; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" data-darkreader-inline-color><strong>GITHUB COMMIT</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:5px;padding-right:10px;padding-bottom:10px;padding-left:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 16px; line-height: 1.5; text-align: center; color: #000000; --darkreader-inline-color:#e8e6e3;" class="esd-text" data-darkreader-inline-color>#{Octopus.Action[Deployment Script].Output.VCSCommitNumber}</div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td><td class="" style="vertical-align:top;width:180px;" ><![endif]-->
                                            <div class="mj-column-per-33-333333333333336 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 1; text-align: center; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" data-darkreader-inline-color><strong>GITHUB COMMENT</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:5px;padding-right:10px;padding-bottom:10px;padding-left:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 16px; line-height: 1.5; text-align: center; color: #000000; --darkreader-inline-color:#e8e6e3;" class="esd-text" data-darkreader-inline-color>#{Octopus.Action[Deployment Script].Output.GitComment}</div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td><td class="" style="vertical-align:top;width:180px;" ><![endif]-->
                                            <div class="mj-column-per-33-333333333333336 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 1; text-align: center; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" data-darkreader-inline-color><strong>COMMITTED BY</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:5px;padding-right:10px;padding-bottom:10px;padding-left:10px;word-break:break-word;" align="center">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 16px; line-height: 1.5; text-align: center; color: #000000; --darkreader-inline-color:#e8e6e3;" class="esd-text" data-darkreader-inline-color>#{Octopus.Action[GitHub Script].Output.GitAuthor}</div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #ffffff; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #ffffff; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:20px;padding-bottom:0px;padding-left:40px;padding-right:40px;padding-top:0px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:520px;" ><![endif]-->
                                            <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px 0;padding-top:10px;padding-right:0;padding-bottom:10px;padding-left:0;word-break:break-word;" align="center" class="esd-text">
                                                                                <p style="border-top: 2px solid #d3d3d3; font-size: 1px; margin: 0px auto; width: 100%; --darkreader-inline-border-top:#3c4144;" data-darkreader-inline-border-top></p>
                                                                                <!--[if mso | IE]><table align="center" border="0" cellpadding="0" cellspacing="0" style="border-top:solid 2px #d3d3d3;font-size:1px;margin:0px auto;width:520px;" role="presentation" width="520px" ><tr><td style="height:0;line-height:0;"> &nbsp;
                </td></tr></table><![endif]-->
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #ffffff; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #ffffff; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:40px;padding-bottom:40px;padding-left:40px;padding-right:40px;padding-top:30px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:520px;" ><![endif]-->
                                            <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td vertical-align="middle" style="font-size:0px;padding:0px;word-break:break-word;" align="center">
                                                                                <table role="presentation" style="border-collapse:separate;width:100%;line-height:100%;" cellspacing="0" cellpadding="0" border="0">
                                                                                    <tbody>
                                                                                        <tr><td role="presentation" style="border:none;border-radius:40px;cursor:auto;mso-padding-alt:10px 25px;background:#111213;" valign="middle" bgcolor="#D90429" align="center">
                                                                                            <a href="#{Octopus.Action[Deployment Script].Output.VCSRoot}" style="display:inline-block;background:#111213;color:#ffffff;font-family:'Noto Sans', 'Helvetica', 'Arial', sans-serif;font-size:18px;font-weight:normal;line-height:1.5;margin:0;text-decoration:none;text-transform:none;padding:10px 25px;mso-padding-alt:0px;border-radius:40px;">
                                                                                              <strong>View GitHub Issues</strong>
                                                                                            </a>
                                                                                          </td></tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #edf2f4; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#1a262a;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #edf2f4; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#1a262a;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:30px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:216px;" ><![endif]-->
                                            <div class="mj-column-per-40 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:0px;word-break:break-word;" align="center">
                                                                                <table role="presentation" style="border-collapse:collapse;border-spacing:0px;" cellspacing="0" cellpadding="0" border="0">
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td style="width:200px;"><img src="product-summary_files/uploads_6f361cb8c6e0b33c89cae59a1d3f944a_fullsize_c8610e13-2.png" style="border: 0px; display: block; outline: none; text-decoration: none; height: auto; width: 100%; font-size: 13px; --darkreader-inline-border-top: initial; --darkreader-inline-border-right: initial; --darkreader-inline-border-bottom: initial; --darkreader-inline-border-left: initial; --darkreader-inline-outline: initial;" width="200" height="auto" data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-outline alt></td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td><td class="" style="vertical-align:top;width:324px;" ><![endif]-->
                                            <div class="mj-column-per-60 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:10px;padding-right:10px;padding-bottom:0px;padding-left:10px;word-break:break-word;" align="left">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.5; text-align: left; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" data-darkreader-inline-color><strong>Deployment Info</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:5px;padding-right:10px;padding-bottom:10px;padding-left:10px;word-break:break-word;" align="left">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 16px; line-height: 1.5; text-align: left; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" class="esd-text" data-darkreader-inline-color>The Octopus Deploy Release #{Octopus.Release.Number} is initiated by #{Octopus.Deployment.CreatedBy.DisplayName} on #{Octopus.Release.Created}.</div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #ffffff; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #ffffff; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:30px;padding-bottom:5px;padding-left:30px;padding-right:30px;padding-top:30px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:270px;" ><![endif]-->
                                            <div class="mj-column-per-50 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="left">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 20px; line-height: 1.5; text-align: left; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" data-darkreader-inline-color><strong>Build Tools</strong></div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td><td class="" style="vertical-align:top;width:270px;" ><![endif]-->
                                            <div class="mj-column-per-50 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;padding-top:0px;padding-right:10px;padding-bottom:0px;padding-left:10px;word-break:break-word;" align="right">
                                                                                <!--[if mso | IE]><table align="right" border="0" cellpadding="0" cellspacing="0" role="presentation" ><tr><td><![endif]-->
                                                                                <table role="presentation" style="float:none;display:inline-table;" cellspacing="0" cellpadding="0" border="0" align="right">
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td style="padding:4px;vertical-align:middle;">
                                                                                                <table role="presentation" style="background: #5f9cf7; border-radius: 3px; width: 28px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#073e91;" cellspacing="0" cellpadding="0" border="0" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                                                                                    <tbody>
                                                                                                        <tr>
                                                                                                            <td style="padding:5px;font-size:0;height:28px;vertical-align:middle;width:28px;"><a href="https://ametekstc.octopus.app#{Octopus.Web.DeploymentLink}" target="_blank"><img alt="Octopus Deploy" title="Octopus Deploy" src="https://yzfnxb.stripocdn.email/content/guids/CABINET_aca1d3e6318c5e4146c2124dece63323a2f4f6e7fa2c95abab6ff219bec46847/images/outputonlinepngtools.png" style="border-radius:3px;display:block;" width="28" height="28"></a></td>
                                                                                                        </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                                <!--[if mso | IE]></td><td><![endif]-->
                                                                                <table role="presentation" style="float:none;display:inline-table;" cellspacing="0" cellpadding="0" border="0" align="right">
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td style="padding:4px;vertical-align:middle;">
                                                                                                <table role="presentation" style="background: rgba(22, 236, 25, 0.996); border-radius: 3px; width: 28px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:rgba(15, 187, 60, 1);" cellspacing="0" cellpadding="0" border="0" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                                                                                    <tbody>
                                                                                                        <tr>
                                                                                                            <td style="padding:5px;font-size:0;height:28px;vertical-align:middle;width:28px;"><a href="#{Octopus.Action[Deployment Script].Output.BuildUrl}" target="_blank"><img alt="TeamCity" title="TeamCity" src="https://yzfnxb.stripocdn.email/content/guids/CABINET_aca1d3e6318c5e4146c2124dece63323a2f4f6e7fa2c95abab6ff219bec46847/images/teamcity.png" style="border-radius:3px;display:block;" width="28" height="28"></a></td>
                                                                                                        </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                                <!--[if mso | IE]></td><td><![endif]-->
                                                                                <table role="presentation" style="float:none;display:inline-table;" cellspacing="0" cellpadding="0" border="0" align="right">
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td style="padding:4px;vertical-align:middle;">
                                                                                                <table role="presentation" style="background: #171515; border-radius: 3px; width: 28px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#111213;" cellspacing="0" cellpadding="0" border="0" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                                                                                    <tbody>
                                                                                                        <tr>
                                                                                                            <td style="padding:5px;font-size:0;height:28px;vertical-align:middle;width:28px;"><a href="#{Octopus.Action[Deployment Script].Output.GitLink}" target="_blank"><img alt="GitHub" title="GitHub" src="https://yzfnxb.stripocdn.email/content/guids/CABINET_aca1d3e6318c5e4146c2124dece63323a2f4f6e7fa2c95abab6ff219bec46847/images/outputonlinepngtools_1_fLw.png" style="border-radius:3px;display:block;" width="28" height="28"></a></td>
                                                                                                        </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                                <!--[if mso | IE]></td></tr></table><![endif]-->
                                                                                <table role="presentation" style="float:none;display:inline-table;" cellspacing="0" cellpadding="0" border="0" align="right">
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td style="padding:4px;vertical-align:middle;">
                                                                                                <table role="presentation" style="background: #e88a2d; border-radius: 3px; width: 28px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#ac5f13;" cellspacing="0" cellpadding="0" border="0" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                                                                                    <tbody>
                                                                                                        <tr>
                                                                                                            <td style="padding:5px;font-size:0;height:28px;vertical-align:middle;width:28px;"><a href="https://app.raygun.com/tiledashboard/1svwy6e/primary" target="_blank"><img alt="Raygun" title="Raygun" src="https://yzfnxb.stripocdn.email/content/guids/CABINET_aca1d3e6318c5e4146c2124dece63323a2f4f6e7fa2c95abab6ff219bec46847/images/raygun.png" style="border-radius:3px;display:block;" width="28" height="28"></a></td>
                                                                                                        </tr>
                                                                                                    </tbody>
                                                                                                </table>
                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><table align="center" border="0" cellpadding="0" cellspacing="0" class="" style="width:600px;" width="600" ><tr><td style="line-height:0px;font-size:0px;mso-line-height-rule:exactly;"><![endif]-->
                        <div style="background: #ffffff; margin: 0px auto; max-width: 600px; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                            <table role="presentation" style="background: #ffffff; width: 100%; --darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#181a1b;" cellspacing="0" cellpadding="0" border="0" align="center" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor>
                                <tbody>
                                    <tr>
                                        <td style="direction:ltr;font-size:0px;padding:30px;padding-bottom:30px;padding-left:30px;padding-right:30px;padding-top:0px;text-align:center;">
                                            <!--[if mso | IE]><table role="presentation" border="0" cellpadding="0" cellspacing="0"><tr><td class="" style="vertical-align:top;width:540px;" ><![endif]-->
                                            <div class="mj-column-per-100 mj-outlook-group-fix" style="font-size:0px;text-align:left;direction:ltr;display:inline-block;vertical-align:top;width:100%;">
                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                    <tbody>
                                                        <tr>
                                                            <td style="vertical-align:top;padding:0;">
                                                                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td style="font-size:0px;padding:10px;word-break:break-word;" align="left">
                                                                                <div style="font-family: &quot;Noto Sans&quot;, Helvetica, Arial, sans-serif; font-size: 12px; line-height: 1.5; text-align: left; color: #2b2d42; --darkreader-inline-color:#c6c1b9;" class="esd-text" data-darkreader-inline-color>Access the build tools from the given links.<br><br>To Unsubscribe from this mail, contact sunkesula.afroz@ametek.com</div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!--[if mso | IE]></td></tr></table><![endif]-->
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--[if mso | IE]></td></tr></table><![endif]-->
                    </div>
                </body>
                
                </html>
            EOT
            Octopus.Action.Email.Subject = "[Deployment #{Octopus.Action[Update Amazon ECS Service].Status.Code}] #{Octopus.Project.Name}:#{Octopus.Release.Number}--#{Octopus.Environment.Name}"
            Octopus.Action.Email.To = "sunkesula.afroz@ametek.com"
            Octopus.Action.RunOnServer = "false"
        }
        worker_pool_variable = ""
    }
}

step "deployment-script" {
    name = "Deployment Script"

    action {
        action_type = "Octopus.Script"
        is_disabled = true
        properties = {
            Octopus.Action.Script.ScriptBody = <<-EOT
                $changeListRaw = $OctopusParameters["Octopus.Deployment.Changes"]
                $changeList = $changeListRaw | ConvertFrom-Json
                
                foreach ($change in $changeList)
                {
                    $ReleaseNumber = "$($change.Version)"
                
                    foreach ($buildInformation in $change.BuildInformation)
                    {
                        $Package = "$($buildInformation.PackageId)"
                        $Version = "$($buildInformation.Version)"
                        $BuildUrl = "$($buildInformation.BuildUrl)"
                        $VCSRoot = "$($buildInformation.VcsRoot)/issues"
                        $VCSCommitNumber = "$($buildInformation.VcsCommitNumber)"
                    }
                    foreach ($commit in $change.Commits)
                    {
                        $GitHash = "$($Commit.Id)"
                        $GitComment = "$($Commit.Comment)"
                        $GitLink = "$($Commit.LinkUrl)"
                    }
                    foreach ($workItem in $change.WorkItems)
                    {
                        $Id = "$($WorkItem.Id)"
                        $LinkUrl = "$($WorkItem.LinkUrl)"
                        $Source = "$($WorkItem.Source)"
                        $Description = "$($WorkItem.Description)"
                    }
                }
                #Write-host $Description,$Source,$LinkUrl,$Id,$GitLink,$GitComment,$GitHash,$VCSCommitNumber,$VCSRoot,$BuildUrl,$Version,$Package, $ReleaseNumber
                Set-OctopusVariable -name "Description" -value $Description
                Set-OctopusVariable -name "Source" -value $Source
                Set-OctopusVariable -name "LinkUrl" -value $LinkUrl
                Set-OctopusVariable -name "Id" -value $Id
                Set-OctopusVariable -name "GitLink" -value $GitLink
                Set-OctopusVariable -name "GitComment" -value $GitComment
                Set-OctopusVariable -name "GitHash" -value $GitHash
                Set-OctopusVariable -name "VCSCommitNumber" -value $VCSCommitNumber
                Set-OctopusVariable -name "VCSRoot" -value $VCSRoot
                Set-OctopusVariable -name "BuildUrl" -value $BuildUrl
                Set-OctopusVariable -name "Version" -value $Version
                Set-OctopusVariable -name "Package" -value $Package
                Set-OctopusVariable -name "ReleaseNumber" -value $ReleaseNumber
            EOT
            Octopus.Action.Script.ScriptSource = "Inline"
            Octopus.Action.Script.Syntax = "PowerShell"
        }
        worker_pool = "stcapplications"
    }
}

step "run-a-script-for-raygun" {
    name = "Run a Script For Raygun"

    action {
        action_type = "Octopus.Script"
        is_disabled = true
        properties = {
            Octopus.Action.Script.ScriptBody = <<-EOT
                Write-Host "Adding deployment in Raygun"+
                
                $githubSha = ""
                if ((Test-Path variable:\GithubToken) -And (Test-Path variable:\GithubRepo)) {
                    try {
                        $repo = "https://api.github.com/repos/" + $OctopusParameters['Octopus.Action[Run a Script For Vault].Output.Secret-GithubRepo']
                        $tagName = "build-" + $OctopusParameters["Octopus.Action[Update Amazon ECS Service].Package.NuGetPackageVersion"]
                        $githuburl = "$repo/git/refs/tags/"+ $tagName + "?access_token=" + $OctopusParameters['Octopus.Action[Run a Script For Vault].Output.Secret-GithubToken']
                        $tagOutput = Invoke-RestMethod -Uri $githuburl
                        $githubCommitUrl = $tagOutput.object.url + "?access_token=" + $OctopusParameters['Octopus.Action[Run a Script For Vault].Output.Secret-GithubToken']
                        $output = Invoke-RestMethod -Uri $githubCommitUrl
                        $githubSha = $output.object.sha
                    }
                   catch {
                        Write-Host "Couldn't find Git tag"
                   }
                }
                
                $deploymentId = $OctopusParameters['Octopus.Release.Number']
                $ownerName = $OctopusParameters['Octopus.Deployment.CreatedBy.DisplayName']
                $emailAddress = $OctopusParameters['Octopus.Deployment.CreatedBy.EmailAddress']
                $comment = $OctopusParameters['Octopus.Release.Notes'];
                
                $command = ConvertTo-Json @{
                    apiKey = $OctopusParameters['Octopus.Action[Run a Script For Vault].Output.Secret-RaygunApiKey']
                    version = $deploymentId
                    ownerName = $ownerName
                    emailAddress = $emailAddress
                    comment = $comment
                    scmIdentifier = $githubSha
                }
                
                $url = "https://app.raygun.com/deployments?authToken=" + $OctopusParameters['Octopus.Action[Run a Script For Vault].Output.Secret-RaygunAuthToken']
                try {
                    Invoke-RestMethod -Uri $url -Body $command -Method Post -ContentType "application/json"
                    Write-Host "Added deployment in Raygun"
                } catch {
                    Write-Host "Error received when adding deployment in Raygun: " $_
                }
            EOT
            Octopus.Action.Script.ScriptSource = "Inline"
            Octopus.Action.Script.Syntax = "PowerShell"
        }
        worker_pool = "stcapplications"
    }
}

step "run-a-script-for-vault" {
    name = "Run a Script For Vault"

    action {
        action_type = "Octopus.Script"
        is_disabled = true
        properties = {
            Octopus.Action.Script.ScriptBody = <<-EOT
                cd C:\Users\Administrator\Downloads\vault_1.12.1_windows_amd64
                $env:PATH =$env:PATH+";."
                $env:VAULT_NAMESPACE="admin/STCApplications/"
                $env:VAULT_ADDR="https://stcapplications-cluster-public-vault-3fa2c317.4787661a.z1.hashicorp.cloud:8200"
                vault login -method=userpass  username="octopus-forcesetup" password="0ct0pu$"
                $ASPNETCORE_ENVIRONMENT = vault kv get -mount=ForceSetup -field=ASPNETCORE_ENVIRONMENT ForceSetupDev
                $ApiKey = vault kv get -mount=ForceSetup -field=ApiKey ForceSetupDev
                $AwsAccessKeyId = vault kv get -mount=ForceSetup -field=AwsAccessKeyId ForceSetupDev
                $ClientId = vault kv get -mount=ForceSetup -field=ClientId ForceSetupDev
                $ClientSecret = vault kv get -mount=ForceSetup -field=ClientSecret ForceSetupDev
                $LogGroup = vault kv get -mount=ForceSetup -field=LogGroup ForceSetupDev
                $ManagementApiUrl = vault kv get -mount=ForceSetup -field=ManagementApiUrl ForceSetupDev
                $MetadataAddress = vault kv get -mount=ForceSetup -field=MetadataAddress ForceSetupDev
                $OrganizationName = vault kv get -mount=ForceSetup -field=OrganizationName ForceSetupDev
                $Region = vault kv get -mount=ForceSetup -field=Region ForceSetupDev
                $SecretAccessKey = vault kv get -mount=ForceSetup -field=SecretAccessKey ForceSetupDev
                $SignupInvitationUrl = vault kv get -mount=ForceSetup -field=SignupInvitationUrl ForceSetupDev
                $UpdateServiceUrl = vault kv get -mount=ForceSetup -field=UpdateServiceUrl ForceSetupDev
                $UserPoolId = vault kv get -mount=ForceSetup -field=UserPoolId ForceSetupDev
                $GithubRepo = vault kv get -mount=Raygun -field=GithubRepo FS-API-Dev
                $GithubToken = vault kv get -mount=Raygun -field=GithubToken FS-API-Dev
                $RaygunApiKey = vault kv get -mount=Raygun -field=RaygunApiKey FS-API-Dev
                $RaygunAuthToken = vault kv get -mount=Raygun -field=RaygunAuthToken FS-API-Dev
                #$app_version = vault kv get -mount=ForceSetup -field=app_version ForceSetupDev
                
                Set-OctopusVariable -name "Secret-ENV" -value "$ASPNETCORE_ENVIRONMENT"
                Set-OctopusVariable -name "Secret-ApiKey" -value "$ApiKey"
                Set-OctopusVariable -name "Secret-AwsAccessKeyId" -value "$AwsAccessKeyId"
                Set-OctopusVariable -name "Secret-ClientId" -value "$ClientId"
                Set-OctopusVariable -name "Secret-ClientSecret" -value "$ClientSecret"
                Set-OctopusVariable -name "Secret-LogGroup" -value "$LogGroup"
                Set-OctopusVariable -name "Secret-ManagementApiUrl" -value "$ManagementApiUrl"
                Set-OctopusVariable -name "Secret-MetadataAddress" -value "$MetadataAddress"
                Set-OctopusVariable -name "Secret-OrganizationName" -value "$OrganizationName"
                Set-OctopusVariable -name "Secret-Region" -value "$Region"
                Set-OctopusVariable -name "Secret-SecretAccessKey" -value "$SecretAccessKey"
                Set-OctopusVariable -name "Secret-SignupInvitationUrl" -value "$SignupInvitationUrl"
                Set-OctopusVariable -name "Secret-UpdateServiceUrl" -value "$UpdateServiceUrl"
                Set-OctopusVariable -name "Secret-UserPoolId" -value "$UserPoolId"
                Set-OctopusVariable -name "Secret-GithubRepo" -value "$GithubRepo"
                Set-OctopusVariable -name "Secret-GithubToken" -value "$GithubToken"
                Set-OctopusVariable -name "Secret-RaygunApiKey" -value "$RaygunApiKey"
                Set-OctopusVariable -name "Secret-RaygunAuthToken" -value "$RaygunAuthToken"
                #Set-OctopusVariable -name "Secret-app_version" -value "$app_version"
                vault login -method=userpass  username="teamcity-login" password="T3@mciTy"
                $AmetekTciSoftwareBuilderGithubUser =vault kv get -mount=Teamcity -field=AmetekTciSoftwareBuilderGithubUser TeamCity
                $AmetekTciSoftwareBuilderGitHubAccessToken =vault kv get -mount=Teamcity -field=AmetekTciSoftwareBuilderGitHubAccessToken-VCS TeamCity
                Set-OctopusVariable -name "AmetekTciSoftwareBuilderGithubUser" -value "$AmetekTciSoftwareBuilderGithubUser"
                Set-OctopusVariable -name "AmetekTciSoftwareBuilderGitHubAccessToken" -value "$AmetekTciSoftwareBuilderGitHubAccessToken"
            EOT
            Octopus.Action.Script.ScriptSource = "Inline"
            Octopus.Action.Script.Syntax = "PowerShell"
        }
        worker_pool = "for-vault"
    }
}

step "run-a-script" {
    name = "GitHub Script"

    action {
        action_type = "Octopus.Script"
        is_disabled = true
        properties = {
            Octopus.Action.Script.ScriptBody = <<-EOT
                rm C:\Users\Administrator\Downloads\git\Chatillon.ForceSetup -r -force
                cd C:\Users\Administrator\Downloads\git\
                git clone https://#{Octopus.Action[Run a Script For Vault].Output.AmetekTciSoftwareBuilderGithubUser}:#{Octopus.Action[Run a Script For Vault].Output.AmetekTciSoftwareBuilderGitHubAccessToken}@github.com/AMETEKTCI/Chatillon.ForceSetup.git
                cd Chatillon.ForceSetup/
                $GitAuthor = git log -1 --pretty=format:%an
                Set-OctopusVariable -name "GitAuthor" -value $GitAuthor
            EOT
            Octopus.Action.Script.ScriptSource = "Inline"
            Octopus.Action.Script.Syntax = "PowerShell"
        }
        worker_pool = "for-vault"
    }
}

step "send-failed-email" {
    name = "Send \"Failed\" Email"

    action {
        action_type = "Octopus.Email"
        is_disabled = true
        properties = {
            Octopus.Action.Email.Body = <<-EOT
                <td align="center" class="esd-block-image" style="font-size: 0px;"><a target="_blank"><img class="adapt-img" src="https://yzfnxb.stripocdn.email/content/guids/CABINET_d75db4ce83dae22fd206be1dc867d89b93016c6cedaa16c4a8c835b24e404c64/images/octopuslogo.jpg" alt style="display: block;" width="560"></a></td>
                <td align="left" class="esd-block-text">
                    <p style="font-size: 28px;"><strong>#{Octopus.Space.Name} / #{Octopus.ProjectGroup.Name} / #{Octopus.Project.Name}</strong></p>
                </td>
                <td align="center" class="esd-block-spacer es-p20" style="font-size:0">
                    <table border="0" width="100%" height="100%" cellpadding="0" cellspacing="0">
                        <tbody>
                            <tr>
                                <td style="border-bottom: 1px solid #cccccc; background: unset; height: 1px; width: 100%; margin: 0px; --darkreader-inline-border-bottom:#3e4446; --darkreader-inline-bgimage: unset; --darkreader-inline-bgcolor: unset;" data-darkreader-inline-border-bottom data-darkreader-inline-bgimage data-darkreader-inline-bgcolor></td>
                            </tr>
                        </tbody>
                    </table>
                </td>
                <td align="center" class="esd-block-text">
                    <p style="font-size: 25px; color: rgb(208, 65, 61); --darkreader-inline-color:#d4524e;" data-darkreader-inline-color>Deployment #{Octopus.Action[Update Amazon ECS Service].Status.Code}</p>
                </td>
                <td align="center" class="esd-block-text">
                    <p style="line-height: 100%;"><br></p>
                    <table border="3" align="center" cellspacing="2" cellpadding="2" style="height:250px;width:1000px;" class="es-table">
                        <tbody>
                            <tr>
                                <td>Project Name</td>
                                <td>#{Octopus.Project.Name}</td>
                            </tr>
                            <tr>
                                <td>Project Version</td>
                                <td>#{Octopus.Release.Number}</td>
                            </tr>
                            <tr>
                                <td>Project Environment</td>
                                <td>#{Octopus.Environment.Name}</td>
                            </tr>
                            <tr>
                                <td>GitHub Commit</td>
                                <td><br>#{Octopus.Action[Deployment Script].Output.VCSCommitNumber}</td>
                            </tr>
                            <tr>
                                <td>GitHub Comment</td>
                                <td>#{Octopus.Action[Deployment Script].Output.GitComment}</td>
                            </tr>
                            <tr>
                                <td>GitHub Issues</td>
                                <td>#{Octopus.Action[Deployment Script].Output.VCSRoot}</td>
                            </tr>
                             <tr>
                                <td>Committed By</td>
                                <td>#{Octopus.Action[GitHub Script].Output.GitAuthor}</td>
                            </tr>
                        </tbody>
                    </table>
                </td>
                <td align="center" class="esd-block-text">
                    <p style="color: rgb(51, 51, 51); --darkreader-inline-color:#c8c3bc;" data-darkreader-inline-color>The Release <span style="font-size:17px;"><strong><em>#{Octopus.Release.Number}</em></strong></span>&nbsp;is created by <span style="font-size:17px;"><strong><em>#{Octopus.Deployment.CreatedBy.DisplayName}</em></strong></span>&nbsp;on <strong>#{Octopus.Release.Created}</strong>.</p>
                </td>
                <td class="esd-stripe" align="center">
                    <table bgcolor="#ffffff" class="es-content-body" align="center" cellpadding="0" cellspacing="0" width="600" data-darkreader-inline-bgcolor style="--darkreader-inline-bgcolor:#181a1b;">
                        <tbody>
                            <tr>
                                <td class="es-p20t es-p20r es-p20l esd-structure" align="left">
                                    <!--[if mso]><table width="560" cellpadding="0" cellspacing="0"><tr><td width="193.33333333333334" valign="top"><![endif]-->
                                    <table cellpadding="0" cellspacing="0" class="es-left" align="left">
                                        <tbody>
                                            <tr>
                                                <td width="173.33333333333334" class="es-m-p0r es-m-p20b esd-container-frame" align="center">
                                                    <table cellpadding="0" cellspacing="0" width="100%">
                                                        <tbody>
                                                            <tr>
                                                                <td align="center" class="esd-block-button">
                                                                    <!--[if mso]><a href="https://ametekstc.octopus.app#{Octopus.Web.DeploymentLink}" target="_blank" hidden>
                	<v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" esdevVmlButton href="https://ametekstc.octopus.app#{Octopus.Web.DeploymentLink}" 
                                style="height:41px; v-text-anchor:middle; width:171px" arcsize="50%" stroke="f"  fillcolor="#0b7cb2">
                		<w:anchorlock></w:anchorlock>
                		<center style='color:#e8e6e3; font-family:arial, "helvetica neue", helvetica, sans-serif; font-size:15px; font-weight:400; line-height:15px;  mso-text-raise:1px'>Octopus Deploy</center>
                	</v:roundrect></a>
                <![endif]-->
                                                                    <!--[if !mso]><!-- --><span class="msohide es-button-border-1672827224584 es-button-border" style="--darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#09638e; --darkreader-inline-border-top:#8b961d; --darkreader-inline-border-right:#8b961d; --darkreader-inline-border-bottom:#8b961d; --darkreader-inline-border-left:#8b961d; border-width: 0px; border-color: #c5d529; background: #0b7cb2;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left><a href="https://ametekstc.octopus.app#{Octopus.Web.DeploymentLink}" class="es-button es-button-1672827224566" target="_blank" style="--darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#0b7cb2; --darkreader-inline-border-top:#0a70a1; --darkreader-inline-border-right:#0a70a1; --darkreader-inline-border-bottom:#0a70a1; --darkreader-inline-border-left:#0a70a1; background: #26aff1; border-color: #26aff1;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left>Octopus Deploy</a></span>
                                                                    <!--<![endif]-->
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                                <td class="es-hidden" width="20"></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!--[if mso]></td><td width="173.33333333333334" valign="top"><![endif]-->
                                    <table cellpadding="0" cellspacing="0" class="es-left" align="left">
                                        <tbody>
                                            <tr>
                                                <td width="173.33333333333334" class="es-m-p20b esd-container-frame" align="center">
                                                    <table cellpadding="0" cellspacing="0" width="100%">
                                                        <tbody>
                                                            <tr>
                                                                <td align="center" class="esd-block-button">
                                                                    <!--[if mso]><a href="#{Octopus.Action[Deployment Script].Output.BuildUrl}" target="_blank" hidden>
                	<v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" esdevVmlButton href="#{Octopus.Action[Deployment Script].Output.BuildUrl}" 
                                style="height:41px; v-text-anchor:middle; width:118px" arcsize="50%" stroke="f"  fillcolor="#2e4396">
                		<w:anchorlock></w:anchorlock>
                		<center style='color:#e2dfdc; font-family:arial, "helvetica neue", helvetica, sans-serif; font-size:15px; font-weight:400; line-height:15px;  mso-text-raise:1px'>TeamCity</center>
                	</v:roundrect></a>
                <![endif]-->
                                                                    <!--[if !mso]><!-- --><span class="msohide es-button-border-1672897385529 es-button-border" style="--darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#2e4396; border-radius: 68px; --darkreader-inline-border-top:#259738; --darkreader-inline-border-right:#259738; --darkreader-inline-border-bottom:#259738; --darkreader-inline-border-left:#259738; border-color: #2cb543; border-width: 0px; background: #3a54bc;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left><a href="#{Octopus.Action[Deployment Script].Output.BuildUrl}" class="es-button es-button-1672897385510" style="--darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#2e4396; --darkreader-inline-border-top:#2b3e8a; --darkreader-inline-border-right:#2b3e8a; --darkreader-inline-border-bottom:#2b3e8a; --darkreader-inline-border-left:#2b3e8a; --darkreader-inline-color:#e2dfdc; border-radius: 68px; background: #3a54bc; border-color: #3a54bc; color: #f5f6f6;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-color>TeamCity</a></span>
                                                                    <!--<![endif]-->
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!--[if mso]></td><td width="20"></td><td width="173.33333333333334" valign="top"><![endif]-->
                                    <table cellpadding="0" cellspacing="0" class="es-right" align="right">
                                        <tbody>
                                            <tr>
                                                <td width="173.33333333333334" align="center" class="esd-container-frame">
                                                    <table cellpadding="0" cellspacing="0" width="100%">
                                                        <tbody>
                                                            <tr>
                                                                <td align="center" class="esd-block-button">
                                                                    <!--[if mso]><a href="#{Octopus.Action[Deployment Script].Output.GitLink}" target="_blank" hidden>
                	<v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" esdevVmlButton href="#{Octopus.Action[Deployment Script].Output.GitLink}" 
                                style="height:41px; v-text-anchor:middle; width:99px" arcsize="50%" stroke="f"  fillcolor="#282c2d">
                		<w:anchorlock></w:anchorlock>
                		<center style='color:#e8e0d8; font-family:arial, "helvetica neue", helvetica, sans-serif; font-size:15px; font-weight:400; line-height:15px;  mso-text-raise:1px'>GitHub</center>
                	</v:roundrect></a>
                <![endif]-->
                                                                    <!--[if !mso]><!-- --><span class="msohide es-button-border-1672893972902 es-button-border" style="--darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#282c2d; --darkreader-inline-border-top:#28a33c; --darkreader-inline-border-right:#28a33c; --darkreader-inline-border-bottom:#28a33c; --darkreader-inline-border-left:#28a33c; border-width: 0px; background: #e2e2e2; border-color: #228b33;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left><a href="#{Octopus.Action[Deployment Script].Output.GitLink}" class="es-button es-button-1672893972880" style="--darkreader-inline-bgimage: initial; --darkreader-inline-bgcolor:#282c2d; --darkreader-inline-border-top:#383d3f; --darkreader-inline-border-right:#383d3f; --darkreader-inline-border-bottom:#383d3f; --darkreader-inline-border-left:#383d3f; --darkreader-inline-color:#e8e0d8; color: #f9f7f5; background: #e2e2e2; border-color: #e2e2e2;" data-darkreader-inline-bgimage data-darkreader-inline-bgcolor data-darkreader-inline-border-top data-darkreader-inline-border-right data-darkreader-inline-border-bottom data-darkreader-inline-border-left data-darkreader-inline-color>GitHub</a></span>
                                                                    <!--<![endif]-->
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!--[if mso]></td></tr></table><![endif]-->
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            EOT
            Octopus.Action.Email.Priority = "High"
            Octopus.Action.Email.Subject = "[Deployment #{Octopus.Action[Update Amazon ECS Service].Status.Code}] #{Octopus.Project.Name}:#{Octopus.Release.Number}--#{Octopus.Environment.Name}"
            Octopus.Action.Email.To = "sunkesula.afroz@ametek.com"
            Octopus.Action.RunOnServer = "false"
        }
        worker_pool_variable = ""
    }
}

step "run-a-selenium-script" {
    name = "Run a selenium Script "

    action {
        action_type = "Octopus.Script"
        properties = {
            Octopus.Action.Script.ScriptBody = <<-EOT
                from selenium import webdriver
                from selenium.webdriver.common.by import By
                from selenium.webdriver.common.keys import Keys
                from selenium.webdriver.common.action_chains import ActionChains
                from selenium.webdriver.support import expected_conditions as EC
                from selenium.webdriver.support.ui import WebDriverWait
                import time
                
                driver=webdriver.Chrome()
                mail=driver.get('https://getnada.com/')
                test=driver.find_element("xpath","/html/body/div[1]/div/div/div/div[2]/div/div[1]/div/div/p/span[1]/a/button").text
                fs=driver.execute_script("window.open('https://dev.forcesetup.com')")
                driver.switch_to.window(driver.window_handles[1])
                WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.XPATH,"/html/body/div[1]/div/div/div/div[1]/div/div[2]/div[2]/button")))
                sign_up = driver.find_element("xpath", "/html/body/div[1]/div/div/div/div[1]/div/div[2]/div[2]/button").click()
                newemail=driver.find_element("name","email").send_keys(test)
                newpassword=driver.find_element("name","password").send_keys("AbcdAbcd@6t")
                newname=driver.find_element("name","name").send_keys("testing-selenium")
                driver.find_element("xpath","/html/body/div[2]/div/div/button[1]").click()
                driver.switch_to.window(driver.window_handles[0])
                WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.LINK_TEXT,"AMETEK STC Account Verification Code")))
                Link=driver.find_element(by=By.LINK_TEXT,value="AMETEK STC Account Verification Code")
                driver.execute_script("arguments[0].click();",Link)
                WebDriverWait(driver, 10).until(EC.frame_to_be_available_and_switch_to_it((By.XPATH,'//*[@id="the_message_iframe"]')))
                WebDriverWait(driver, 20).until(EC.presence_of_element_located((By.XPATH,"/html/body/div[1]/div[2]/h3")))
                code=driver.find_element("xpath","/html/body/div[1]/div[2]/h3").text
                driver.switch_to.default_content()
                driver.switch_to.window(driver.window_handles[1])
                newcode=driver.find_element("name","code").send_keys(code)
                print("Unit test #number is passed!!!")
                driver.quit()
            EOT
            Octopus.Action.Script.ScriptSource = "Inline"
            Octopus.Action.Script.Syntax = "Python"
        }
        worker_pool = "for-vault"
    }
}